var T=Object.defineProperty;var B=(e,r,n)=>r in e?T(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var s=(e,r,n)=>B(e,typeof r!="symbol"?r+"":r,n);function $(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function L(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),t=0;t<n.length;t++)n[t]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),h=i.charCodeAt(0);if(n[h]!==255)throw new TypeError(i+" is ambiguous");n[h]=o}var d=e.length,b=e.charAt(0),C=Math.log(d)/Math.log(256),v=Math.log(256)/Math.log(d);function E(a){if(a instanceof Uint8Array||(ArrayBuffer.isView(a)?a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength):Array.isArray(a)&&(a=Uint8Array.from(a))),!(a instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(a.length===0)return"";for(var f=0,A=0,l=0,u=a.length;l!==u&&a[l]===0;)l++,f++;for(var x=(u-l)*v+1>>>0,p=new Uint8Array(x);l!==u;){for(var g=a[l],m=0,w=x-1;(g!==0||m<A)&&w!==-1;w--,m++)g+=256*p[w]>>>0,p[w]=g%d>>>0,g=g/d>>>0;if(g!==0)throw new Error("Non-zero carry");A=m,l++}for(var y=x-A;y!==x&&p[y]===0;)y++;for(var U=b.repeat(f);y<x;++y)U+=e.charAt(p[y]);return U}function S(a){if(typeof a!="string")throw new TypeError("Expected String");if(a.length===0)return new Uint8Array;var f=0;if(a[f]!==" "){for(var A=0,l=0;a[f]===b;)A++,f++;for(var u=(a.length-f)*C+1>>>0,x=new Uint8Array(u);a[f];){var p=n[a.charCodeAt(f)];if(p===255)return;for(var g=0,m=u-1;(p!==0||g<l)&&m!==-1;m--,g++)p+=d*x[m]>>>0,x[m]=p%256>>>0,p=p/256>>>0;if(p!==0)throw new Error("Non-zero carry");l=g,f++}if(a[f]!==" "){for(var w=u-l;w!==u&&x[w]===0;)w++;for(var y=new Uint8Array(A+(u-w)),U=A;w!==u;)y[U++]=x[w++];return y}}}function O(a){var f=S(a);if(f)return f;throw new Error(`Non-${r} character`)}return{encode:E,decodeUnsafe:S,decode:O}}var V=L,J=V;class j{constructor(r,n,t){s(this,"name");s(this,"prefix");s(this,"baseEncode");this.name=r,this.prefix=n,this.baseEncode=t}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class q{constructor(r,n,t){s(this,"name");s(this,"prefix");s(this,"baseDecode");s(this,"prefixCodePoint");if(this.name=r,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=t}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return D(this,r)}}class _{constructor(r){s(this,"decoders");this.decoders=r}or(r){return D(this,r)}decode(r){const n=r[0],t=this.decoders[n];if(t!=null)return t.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function D(e,r){return new _({...e.decoders??{[e.prefix]:e},...r.decoders??{[r.prefix]:r}})}class G{constructor(r,n,t,o){s(this,"name");s(this,"prefix");s(this,"baseEncode");s(this,"baseDecode");s(this,"encoder");s(this,"decoder");this.name=r,this.prefix=n,this.baseEncode=t,this.baseDecode=o,this.encoder=new j(r,n,t),this.decoder=new q(r,n,o)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}function P({name:e,prefix:r,encode:n,decode:t}){return new G(e,r,n,t)}function R({name:e,prefix:r,alphabet:n}){const{encode:t,decode:o}=J(n,e);return P({prefix:r,name:e,encode:t,decode:i=>$(o(i))})}function I(e,r,n,t){const o={};for(let v=0;v<r.length;++v)o[r[v]]=v;let i=e.length;for(;e[i-1]==="=";)--i;const h=new Uint8Array(i*n/8|0);let d=0,b=0,C=0;for(let v=0;v<i;++v){const E=o[e[v]];if(E===void 0)throw new SyntaxError(`Non-${t} character`);b=b<<n|E,d+=n,d>=8&&(d-=8,h[C++]=255&b>>d)}if(d>=n||255&b<<8-d)throw new SyntaxError("Unexpected end of data");return h}function K(e,r,n){const t=r[r.length-1]==="=",o=(1<<n)-1;let i="",h=0,d=0;for(let b=0;b<e.length;++b)for(d=d<<8|e[b],h+=8;h>n;)h-=n,i+=r[o&d>>h];if(h!==0&&(i+=r[o&d<<n-h]),t)for(;i.length*n&7;)i+="=";return i}function c({name:e,prefix:r,bitsPerChar:n,alphabet:t}){return P({prefix:r,name:e,encode(o){return K(o,t,n)},decode(o){return I(o,t,n,e)}})}c({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});c({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});c({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});c({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});c({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});c({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});c({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});c({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});c({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});R({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});R({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});c({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});c({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});c({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});c({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Q=k,z=128,X=127,Z=~X,W=Math.pow(2,31);function k(e,r,n){r=r||[],n=n||0;for(var t=n;e>=W;)r[n++]=e&255|z,e/=128;for(;e&Z;)r[n++]=e&255|z,e>>>=7;return r[n]=e|0,k.bytes=n-t+1,r}var Y=N,H=128,F=127;function N(e,t){var n=0,t=t||0,o=0,i=t,h,d=e.length;do{if(i>=d)throw N.bytes=0,new RangeError("Could not decode varint");h=e[i++],n+=o<28?(h&F)<<o:(h&F)*Math.pow(2,o),o+=7}while(h>=H);return N.bytes=i-t,n}var ee=Math.pow(2,7),re=Math.pow(2,14),ne=Math.pow(2,21),te=Math.pow(2,28),ae=Math.pow(2,35),oe=Math.pow(2,42),ie=Math.pow(2,49),de=Math.pow(2,56),he=Math.pow(2,63),se=function(e){return e<ee?1:e<re?2:e<ne?3:e<te?4:e<ae?5:e<oe?6:e<ie?7:e<de?8:e<he?9:10},fe={encode:Q,decode:Y,encodingLength:se},M=fe;function pe(e,r=0){return[M.decode(e,r),M.decode.bytes]}function be(e,r,n=0){return M.encode(e,r,n),r}function le(e){return M.encodingLength(e)}export{le as a,pe as d,be as e};
