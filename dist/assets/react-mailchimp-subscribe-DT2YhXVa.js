import{R as o}from"./react-VWm1Us2J.js";import{j as d}from"./jsonp-DhlZhSjZ.js";import{t as h}from"./to-querystring-TIZBfLy4.js";var y=function(e){var n=e.status,r=e.message,i=e.className,u=e.style,a=e.onSubmitted,s=void 0,c=function(){return s&&s.value.indexOf("@")>-1&&a({EMAIL:s.value})};return o.createElement("div",{className:i,style:u},n==="sending"&&o.createElement("div",{style:{color:"blue"}},"sending..."),n==="error"&&o.createElement("div",{style:{color:"red"},dangerouslySetInnerHTML:{__html:r}}),n==="success"&&o.createElement("div",{style:{color:"green"},dangerouslySetInnerHTML:{__html:r}}),o.createElement("input",{ref:function(m){return s=m},type:"email",placeholder:"Your email"}),o.createElement("button",{onClick:c},"Submit"))};function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function S(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var E=function(e){return e.replace("/post?","/post-json?")},g=function(t){S(e,t);function e(){var n,r,i;v(this,e);for(var u=arguments.length,a=Array(u),s=0;s<u;s++)a[s]=arguments[s];return i=(n=(r=b(this,t.call.apply(t,[this].concat(a))),r),r.state={status:null,message:null},r.subscribe=function(c){var l=h(c),m=E(r.props.url)+"&"+l;r.setState({status:"sending",message:null},function(){return d(m,{param:"c"},function(f,p){f?r.setState({status:"error",message:f}):p.result!=="success"?r.setState({status:"error",message:p.msg}):r.setState({status:"success",message:p.msg})})})},n),b(r,i)}return e.prototype.render=function(){return this.props.render({subscribe:this.subscribe,status:this.state.status,message:this.state.message})},e}(o.Component);g.propTypes={};g.defaultProps={render:function(e){var n=e.subscribe,r=e.status,i=e.message;return o.createElement(y,{status:r,message:i,onSubmitted:function(a){return n(a)}})}};export{g as M};
