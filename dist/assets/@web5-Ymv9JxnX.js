import{b as Oe}from"./buffer-EBb79ogF.js";import{e as bi,d as An,a as pi}from"./multiformats-Bnqo-t4N.js";import"./browser-level-DZxnF6wW.js";import{r as Ke}from"./abort-controller-jTbv3-Qo.js";import{e as at}from"./events-CXH2uRM3.js";import{b as $e}from"./process-DzrMeI0r.js";import{s as yi}from"./string_decoder-CYl6GXHo.js";import{s as wi}from"./@noble-Di541zTV.js";new TextEncoder;new TextDecoder;var qe;(function(e){e.Debug="debug",e.Silent="silent"})(qe||(qe={}));class _i{constructor(){this.logLevel=qe.Silent}setLogLevel(t){this.logLevel=t}log(t){this.info(t)}info(t){this.logLevel!==qe.Silent&&console.info(t)}error(t){this.logLevel!==qe.Silent&&console.error(t)}}const gi=new _i;typeof window<"u"&&(window.web5logger=gi);class ee{static addPrefix(t){var n;let{code:r,data:l,name:a}=t;if(!(a?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(r=ee.codeToName.has(r)?r:ee.nameToCode.get(a),r===void 0)throw new Error(`Unsupported multicodec: ${(n=t.name)!==null&&n!==void 0?n:t.code}`);const s=pi(r),w=new Uint8Array(s+l.byteLength);return w.set(l,s),bi(r,w),w}static getCodeFromData(t){const{prefixedData:n}=t,[r,l]=An(n);return r}static getCodeFromName(t){const{name:n}=t,r=ee.nameToCode.get(n);if(r===void 0)throw new Error(`Unsupported multicodec: ${n}`);return r}static getNameFromCode(t){const{code:n}=t,r=ee.codeToName.get(n);if(r===void 0)throw new Error(`Unsupported multicodec: ${n}`);return r}static registerCodec(t){ee.codeToName.set(t.code,t.name),ee.nameToCode.set(t.name,t.code)}static removePrefix(t){const{prefixedData:n}=t,[r,l]=An(n),a=ee.codeToName.get(r);if(a===void 0)throw new Error(`Unsupported multicodec: ${r}`);return{code:r,data:n.slice(l),name:a}}}ee.codeToName=new Map;ee.nameToCode=new Map;ee.registerCodec({code:237,name:"ed25519-pub"});ee.registerCodec({code:4864,name:"ed25519-priv"});ee.registerCodec({code:236,name:"x25519-pub"});ee.registerCodec({code:4866,name:"x25519-priv"});ee.registerCodec({code:231,name:"secp256k1-pub"});ee.registerCodec({code:4865,name:"secp256k1-priv"});var Si={exports:{}},It={exports:{}},H={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array},cr={exports:{}};(function(e){const t=Oe,{kResistStopPropagation:n,SymbolDispose:r}=H,l=globalThis.AbortSignal||Ke().AbortSignal,a=globalThis.AbortController||Ke().AbortController,s=Object.getPrototypeOf(async function(){}).constructor,w=globalThis.Blob||t.Blob,R=typeof w<"u"?function(d){return d instanceof w}:function(d){return!1},c=(h,d)=>{if(h!==void 0&&(h===null||typeof h!="object"||!("aborted"in h)))throw new ERR_INVALID_ARG_TYPE(d,"AbortSignal",h)},b=(h,d)=>{if(typeof h!="function")throw new ERR_INVALID_ARG_TYPE(d,"Function",h)};class T extends Error{constructor(d){if(!Array.isArray(d))throw new TypeError(`Expected input to be an Array, got ${typeof d}`);let A="";for(let p=0;p<d.length;p++)A+=`    ${d[p].stack}
`;super(A),this.name="AggregateError",this.errors=d}}e.exports={AggregateError:T,kEmptyObject:Object.freeze({}),once(h){let d=!1;return function(...A){d||(d=!0,h.apply(this,A))}},createDeferredPromise:function(){let h,d;return{promise:new Promise((p,m)=>{h=p,d=m}),resolve:h,reject:d}},promisify(h){return new Promise((d,A)=>{h((p,...m)=>p?A(p):d(...m))})},debuglog(){return function(){}},format(h,...d){return h.replace(/%([sdifj])/g,function(...[A,p]){const m=d.shift();return p==="f"?m.toFixed(6):p==="j"?JSON.stringify(m):p==="s"&&typeof m=="object"?`${m.constructor!==Object?m.constructor.name:""} {}`.trim():m.toString()})},inspect(h){switch(typeof h){case"string":if(h.includes("'"))if(h.includes('"')){if(!h.includes("`")&&!h.includes("${"))return`\`${h}\``}else return`"${h}"`;return`'${h}'`;case"number":return isNaN(h)?"NaN":Object.is(h,-0)?String(h):h;case"bigint":return`${String(h)}n`;case"boolean":case"undefined":return String(h);case"object":return"{}"}},types:{isAsyncFunction(h){return h instanceof s},isArrayBufferView(h){return ArrayBuffer.isView(h)}},isBlob:R,deprecate(h,d){return h},addAbortListener:at.addAbortListener||function(d,A){if(d===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",d);c(d,"signal"),b(A,"listener");let p;return d.aborted?queueMicrotask(()=>A()):(d.addEventListener("abort",A,{__proto__:null,once:!0,[n]:!0}),p=()=>{d.removeEventListener("abort",A)}),{__proto__:null,[r](){var m;(m=p)===null||m===void 0||m()}}},AbortSignalAny:l.any||function(d){if(d.length===1)return d[0];const A=new a,p=()=>A.abort();return d.forEach(m=>{c(m,"signals"),m.addEventListener("abort",p,{once:!0})}),A.signal.addEventListener("abort",()=>{d.forEach(m=>m.removeEventListener("abort",p))},{once:!0}),A.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(cr);var ne=cr.exports,tn={};const{format:Ei,inspect:it,AggregateError:Ri}=ne,mi=globalThis.AggregateError||Ri,Ai=Symbol("kIsNodeError"),Ti=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Ii=/^([A-Z][a-z0-9]*)+$/,xi="__node_internal_",ft={};function Ie(e,t){if(!e)throw new ft.ERR_INTERNAL_ASSERTION(t)}function Tn(e){let t="",n=e.length;const r=e[0]==="-"?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function Oi(e,t,n){if(typeof t=="function")return Ie(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const r=(t.match(/%[dfijoOs]/g)||[]).length;return Ie(r===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?t:Ei(t,...n)}function Q(e,t,n){n||(n=Error);class r extends n{constructor(...a){super(Oi(e,t,a))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=e,r.prototype[Ai]=!0,ft[e]=r}function In(e){const t=xi+e.name;return Object.defineProperty(e,"name",{value:t}),e}function $i(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new mi([t,e],t.message);return n.code=t.code,n}return e||t}let Ni=class extends Error{constructor(t="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new ft.ERR_INVALID_ARG_TYPE("options","Object",n);super(t,n),this.code="ABORT_ERR",this.name="AbortError"}};Q("ERR_ASSERTION","%s",Error);Q("ERR_INVALID_ARG_TYPE",(e,t,n)=>{Ie(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const l=[],a=[],s=[];for(const R of t)Ie(typeof R=="string","All expected entries have to be of type string"),Ti.includes(R)?l.push(R.toLowerCase()):Ii.test(R)?a.push(R):(Ie(R!=="object",'The value "object" should be written as "Object"'),s.push(R));if(a.length>0){const R=l.indexOf("object");R!==-1&&(l.splice(l,R,1),a.push("Object"))}if(l.length>0){switch(l.length){case 1:r+=`of type ${l[0]}`;break;case 2:r+=`one of type ${l[0]} or ${l[1]}`;break;default:{const R=l.pop();r+=`one of type ${l.join(", ")}, or ${R}`}}(a.length>0||s.length>0)&&(r+=" or ")}if(a.length>0){switch(a.length){case 1:r+=`an instance of ${a[0]}`;break;case 2:r+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const R=a.pop();r+=`an instance of ${a.join(", ")}, or ${R}`}}s.length>0&&(r+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(r+="an "),r+=`${s[0]}`;break;case 2:r+=`one of ${s[0]} or ${s[1]}`;break;default:{const R=s.pop();r+=`one of ${s.join(", ")}, or ${R}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var w;if((w=n.constructor)!==null&&w!==void 0&&w.name)r+=`. Received an instance of ${n.constructor.name}`;else{const R=it(n,{depth:-1});r+=`. Received ${R}`}}else{let R=it(n,{colors:!1});R.length>25&&(R=`${R.slice(0,25)}...`),r+=`. Received type ${typeof n} (${R})`}return r},TypeError);Q("ERR_INVALID_ARG_VALUE",(e,t,n="is invalid")=>{let r=it(t);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${n}. Received ${r}`},TypeError);Q("ERR_INVALID_RETURN_VALUE",(e,t,n)=>{var r;const l=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${e} to be returned from the "${t}" function but got ${l}.`},TypeError);Q("ERR_MISSING_ARGS",(...e)=>{Ie(e.length>0,"At least one arg needs to be specified");let t;const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map(r=>`"${r}"`).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}break}return`${t} must be specified`},TypeError);Q("ERR_OUT_OF_RANGE",(e,t,n)=>{Ie(t,'Missing "range" argument');let r;return Number.isInteger(n)&&Math.abs(n)>2**32?r=Tn(String(n)):typeof n=="bigint"?(r=String(n),(n>2n**32n||n<-(2n**32n))&&(r=Tn(r)),r+="n"):r=it(n),`The value of "${e}" is out of range. It must be ${t}. Received ${r}`},RangeError);Q("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Q("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Q("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Q("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Q("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Q("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Q("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Q("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Q("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Q("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Q("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var oe={AbortError:Ni,aggregateTwoErrors:In($i),hideStackFrames:In,codes:ft};const{ArrayIsArray:nn,ArrayPrototypeIncludes:hr,ArrayPrototypeJoin:br,ArrayPrototypeMap:Di,NumberIsInteger:rn,NumberIsNaN:vi,NumberMAX_SAFE_INTEGER:Li,NumberMIN_SAFE_INTEGER:Mi,NumberParseInt:ki,ObjectPrototypeHasOwnProperty:Pi,RegExpPrototypeExec:pr,String:Wi,StringPrototypeToUpperCase:Ci,StringPrototypeTrim:ji}=H,{hideStackFrames:fe,codes:{ERR_SOCKET_BAD_PORT:Fi,ERR_INVALID_ARG_TYPE:te,ERR_INVALID_ARG_VALUE:Fe,ERR_OUT_OF_RANGE:xe,ERR_UNKNOWN_SIGNAL:xn}}=oe,{normalizeEncoding:Ui}=ne,{isAsyncFunction:Bi,isArrayBufferView:Gi}=ne.types,On={};function Vi(e){return e===(e|0)}function Hi(e){return e===e>>>0}const qi=/^[0-7]+$/,Yi="must be a 32-bit unsigned integer or an octal string";function Ki(e,t,n){if(typeof e>"u"&&(e=n),typeof e=="string"){if(pr(qi,e)===null)throw new Fe(t,e,Yi);e=ki(e,8)}return yr(e,t),e}const zi=fe((e,t,n=Mi,r=Li)=>{if(typeof e!="number")throw new te(t,"number",e);if(!rn(e))throw new xe(t,"an integer",e);if(e<n||e>r)throw new xe(t,`>= ${n} && <= ${r}`,e)}),Xi=fe((e,t,n=-2147483648,r=2147483647)=>{if(typeof e!="number")throw new te(t,"number",e);if(!rn(e))throw new xe(t,"an integer",e);if(e<n||e>r)throw new xe(t,`>= ${n} && <= ${r}`,e)}),yr=fe((e,t,n=!1)=>{if(typeof e!="number")throw new te(t,"number",e);if(!rn(e))throw new xe(t,"an integer",e);const r=n?1:0,l=4294967295;if(e<r||e>l)throw new xe(t,`>= ${r} && <= ${l}`,e)});function on(e,t){if(typeof e!="string")throw new te(t,"string",e)}function Ji(e,t,n=void 0,r){if(typeof e!="number")throw new te(t,"number",e);if(n!=null&&e<n||r!=null&&e>r||(n!=null||r!=null)&&vi(e))throw new xe(t,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,e)}const Qi=fe((e,t,n)=>{if(!hr(n,e)){const l="must be one of: "+br(Di(n,a=>typeof a=="string"?`'${a}'`:Wi(a)),", ");throw new Fe(t,e,l)}});function wr(e,t){if(typeof e!="boolean")throw new te(t,"boolean",e)}function xt(e,t,n){return e==null||!Pi(e,t)?n:e[t]}const Zi=fe((e,t,n=null)=>{const r=xt(n,"allowArray",!1),l=xt(n,"allowFunction",!1);if(!xt(n,"nullable",!1)&&e===null||!r&&nn(e)||typeof e!="object"&&(!l||typeof e!="function"))throw new te(t,"Object",e)}),eo=fe((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new te(t,"a dictionary",e)}),ut=fe((e,t,n=0)=>{if(!nn(e))throw new te(t,"Array",e);if(e.length<n){const r=`must be longer than ${n}`;throw new Fe(t,e,r)}});function to(e,t){ut(e,t);for(let n=0;n<e.length;n++)on(e[n],`${t}[${n}]`)}function no(e,t){ut(e,t);for(let n=0;n<e.length;n++)wr(e[n],`${t}[${n}]`)}function ro(e,t){ut(e,t);for(let n=0;n<e.length;n++){const r=e[n],l=`${t}[${n}]`;if(r==null)throw new te(l,"AbortSignal",r);_r(r,l)}}function io(e,t="signal"){if(on(e,t),On[e]===void 0)throw On[Ci(e)]!==void 0?new xn(e+" (signals must use all capital letters)"):new xn(e)}const oo=fe((e,t="buffer")=>{if(!Gi(e))throw new te(t,["Buffer","TypedArray","DataView"],e)});function lo(e,t){const n=Ui(t),r=e.length;if(n==="hex"&&r%2!==0)throw new Fe("encoding",t,`is invalid for data of length ${r}`)}function ao(e,t="Port",n=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&ji(e).length===0||+e!==+e>>>0||e>65535||e===0&&!n)throw new Fi(t,e,n);return e|0}const _r=fe((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new te(t,"AbortSignal",e)}),fo=fe((e,t)=>{if(typeof e!="function")throw new te(t,"Function",e)}),uo=fe((e,t)=>{if(typeof e!="function"||Bi(e))throw new te(t,"Function",e)}),so=fe((e,t)=>{if(e!==void 0)throw new te(t,"undefined",e)});function co(e,t,n){if(!hr(n,e))throw new te(t,`('${br(n,"|")}')`,e)}const ho=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function $n(e,t){if(typeof e>"u"||!pr(ho,e))throw new Fe(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function bo(e){if(typeof e=="string")return $n(e,"hints"),e;if(nn(e)){const t=e.length;let n="";if(t===0)return n;for(let r=0;r<t;r++){const l=e[r];$n(l,"hints"),n+=l,r!==t-1&&(n+=", ")}return n}throw new Fe("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var ze={isInt32:Vi,isUint32:Hi,parseFileMode:Ki,validateArray:ut,validateStringArray:to,validateBooleanArray:no,validateAbortSignalArray:ro,validateBoolean:wr,validateBuffer:oo,validateDictionary:eo,validateEncoding:lo,validateFunction:fo,validateInt32:Xi,validateInteger:zi,validateNumber:Ji,validateObject:Zi,validateOneOf:Qi,validatePlainFunction:uo,validatePort:ao,validateSignalName:io,validateString:on,validateUint32:yr,validateUndefined:so,validateUnion:co,validateAbortSignal:_r,validateLinkHeaderValue:bo},ln={exports:{}};const{SymbolAsyncIterator:Nn,SymbolIterator:Dn,SymbolFor:Ne}=H,gr=Ne("nodejs.stream.destroyed"),Sr=Ne("nodejs.stream.errored"),Vt=Ne("nodejs.stream.readable"),Ht=Ne("nodejs.stream.writable"),Er=Ne("nodejs.stream.disturbed"),po=Ne("nodejs.webstream.isClosedPromise"),yo=Ne("nodejs.webstream.controllerErrorFunction");function dt(e,t=!1){var n;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((n=e._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!e._writableState||e._readableState))}function st(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function wo(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function ce(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function Rr(e){return!!(e&&!ce(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function mr(e){return!!(e&&!ce(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function Ar(e){return!!(e&&!ce(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function _o(e){return Rr(e)||mr(e)||Ar(e)}function go(e,t){return e==null?!1:t===!0?typeof e[Nn]=="function":t===!1?typeof e[Dn]=="function":typeof e[Nn]=="function"||typeof e[Dn]=="function"}function ct(e){if(!ce(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[gr]||r!=null&&r.destroyed)}function Tr(e){if(!st(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function So(e,t){if(!st(e))return null;if(e.writableFinished===!0)return!0;const n=e._writableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.finished)!="boolean"?null:!!(n.finished||t===!1&&n.ended===!0&&n.length===0)}function Eo(e){if(!dt(e))return null;if(e.readableEnded===!0)return!0;const t=e._readableState;return!t||t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function Ir(e,t){if(!dt(e))return null;const n=e._readableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.endEmitted)!="boolean"?null:!!(n.endEmitted||t===!1&&n.ended===!0&&n.length===0)}function xr(e){return e&&e[Vt]!=null?e[Vt]:typeof(e==null?void 0:e.readable)!="boolean"?null:ct(e)?!1:dt(e)&&e.readable&&!Ir(e)}function Or(e){return e&&e[Ht]!=null?e[Ht]:typeof(e==null?void 0:e.writable)!="boolean"?null:ct(e)?!1:st(e)&&e.writable&&!Tr(e)}function Ro(e,t){return ce(e)?ct(e)?!0:!((t==null?void 0:t.readable)!==!1&&xr(e)||(t==null?void 0:t.writable)!==!1&&Or(e)):null}function mo(e){var t,n;return ce(e)?e.writableErrored?e.writableErrored:(t=(n=e._writableState)===null||n===void 0?void 0:n.errored)!==null&&t!==void 0?t:null:null}function Ao(e){var t,n;return ce(e)?e.readableErrored?e.readableErrored:(t=(n=e._readableState)===null||n===void 0?void 0:n.errored)!==null&&t!==void 0?t:null:null}function To(e){if(!ce(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,n=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(n==null?void 0:n.closed)=="boolean"?(t==null?void 0:t.closed)||(n==null?void 0:n.closed):typeof e._closed=="boolean"&&$r(e)?e._closed:null}function $r(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function Nr(e){return typeof e._sent100=="boolean"&&$r(e)}function Io(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function xo(e){if(!ce(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&Nr(e)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function Oo(e){var t;return!!(e&&((t=e[Er])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function $o(e){var t,n,r,l,a,s,w,R,c,b;return!!(e&&((t=(n=(r=(l=(a=(s=e[Sr])!==null&&s!==void 0?s:e.readableErrored)!==null&&a!==void 0?a:e.writableErrored)!==null&&l!==void 0?l:(w=e._readableState)===null||w===void 0?void 0:w.errorEmitted)!==null&&r!==void 0?r:(R=e._writableState)===null||R===void 0?void 0:R.errorEmitted)!==null&&n!==void 0?n:(c=e._readableState)===null||c===void 0?void 0:c.errored)!==null&&t!==void 0?t:!((b=e._writableState)===null||b===void 0)&&b.errored))}var _e={isDestroyed:ct,kIsDestroyed:gr,isDisturbed:Oo,kIsDisturbed:Er,isErrored:$o,kIsErrored:Sr,isReadable:xr,kIsReadable:Vt,kIsClosedPromise:po,kControllerErrorFunction:yo,kIsWritable:Ht,isClosed:To,isDuplexNodeStream:wo,isFinished:Ro,isIterable:go,isReadableNodeStream:dt,isReadableStream:Rr,isReadableEnded:Eo,isReadableFinished:Ir,isReadableErrored:Ao,isNodeStream:ce,isWebStream:_o,isWritable:Or,isWritableNodeStream:st,isWritableStream:mr,isWritableEnded:Tr,isWritableFinished:So,isWritableErrored:mo,isServerRequest:Io,isServerResponse:Nr,willEmitClose:xo,isTransformStream:Ar};const Se=$e,{AbortError:Dr,codes:No}=oe,{ERR_INVALID_ARG_TYPE:Do,ERR_STREAM_PREMATURE_CLOSE:vn}=No,{kEmptyObject:qt,once:Yt}=ne,{validateAbortSignal:vo,validateFunction:Lo,validateObject:Mo,validateBoolean:ko}=ze,{Promise:Po,PromisePrototypeThen:Wo,SymbolDispose:vr}=H,{isClosed:Co,isReadable:Ln,isReadableNodeStream:Ot,isReadableStream:jo,isReadableFinished:Mn,isReadableErrored:kn,isWritable:Pn,isWritableNodeStream:Wn,isWritableStream:Fo,isWritableFinished:Cn,isWritableErrored:jn,isNodeStream:Uo,willEmitClose:Bo,kIsClosedPromise:Go}=_e;let Ce;function Vo(e){return e.setHeader&&typeof e.abort=="function"}const Kt=()=>{};function Lr(e,t,n){var r,l;if(arguments.length===2?(n=t,t=qt):t==null?t=qt:Mo(t,"options"),Lo(n,"callback"),vo(t.signal,"options.signal"),n=Yt(n),jo(e)||Fo(e))return Ho(e,t,n);if(!Uo(e))throw new Do("stream",["ReadableStream","WritableStream","Stream"],e);const a=(r=t.readable)!==null&&r!==void 0?r:Ot(e),s=(l=t.writable)!==null&&l!==void 0?l:Wn(e),w=e._writableState,R=e._readableState,c=()=>{e.writable||h()};let b=Bo(e)&&Ot(e)===a&&Wn(e)===s,T=Cn(e,!1);const h=()=>{T=!0,e.destroyed&&(b=!1),!(b&&(!e.readable||a))&&(!a||d)&&n.call(e)};let d=Mn(e,!1);const A=()=>{d=!0,e.destroyed&&(b=!1),!(b&&(!e.writable||s))&&(!s||T)&&n.call(e)},p=L=>{n.call(e,L)};let m=Co(e);const v=()=>{m=!0;const L=jn(e)||kn(e);if(L&&typeof L!="boolean")return n.call(e,L);if(a&&!d&&Ot(e,!0)&&!Mn(e,!1))return n.call(e,new vn);if(s&&!T&&!Cn(e,!1))return n.call(e,new vn);n.call(e)},D=()=>{m=!0;const L=jn(e)||kn(e);if(L&&typeof L!="boolean")return n.call(e,L);n.call(e)},_=()=>{e.req.on("finish",h)};Vo(e)?(e.on("complete",h),b||e.on("abort",v),e.req?_():e.on("request",_)):s&&!w&&(e.on("end",c),e.on("close",c)),!b&&typeof e.aborted=="boolean"&&e.on("aborted",v),e.on("end",A),e.on("finish",h),t.error!==!1&&e.on("error",p),e.on("close",v),m?Se.nextTick(v):w!=null&&w.errorEmitted||R!=null&&R.errorEmitted?b||Se.nextTick(D):(!a&&(!b||Ln(e))&&(T||Pn(e)===!1)||!s&&(!b||Pn(e))&&(d||Ln(e)===!1)||R&&e.req&&e.aborted)&&Se.nextTick(D);const F=()=>{n=Kt,e.removeListener("aborted",v),e.removeListener("complete",h),e.removeListener("abort",v),e.removeListener("request",_),e.req&&e.req.removeListener("finish",h),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",h),e.removeListener("end",A),e.removeListener("error",p),e.removeListener("close",v)};if(t.signal&&!m){const L=()=>{const X=n;F(),X.call(e,new Dr(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)Se.nextTick(L);else{Ce=Ce||ne.addAbortListener;const X=Ce(t.signal,L),le=n;n=Yt((...B)=>{X[vr](),le.apply(e,B)})}}return F}function Ho(e,t,n){let r=!1,l=Kt;if(t.signal)if(l=()=>{r=!0,n.call(e,new Dr(void 0,{cause:t.signal.reason}))},t.signal.aborted)Se.nextTick(l);else{Ce=Ce||ne.addAbortListener;const s=Ce(t.signal,l),w=n;n=Yt((...R)=>{s[vr](),w.apply(e,R)})}const a=(...s)=>{r||Se.nextTick(()=>n.apply(e,s))};return Wo(e[Go].promise,a,a),Kt}function qo(e,t){var n;let r=!1;return t===null&&(t=qt),(n=t)!==null&&n!==void 0&&n.cleanup&&(ko(t.cleanup,"cleanup"),r=t.cleanup),new Po((l,a)=>{const s=Lr(e,t,w=>{r&&s(),w?a(w):l()})})}ln.exports=Lr;ln.exports.finished=qo;var Ee=ln.exports;const de=$e,{aggregateTwoErrors:Yo,codes:{ERR_MULTIPLE_CALLBACK:Ko},AbortError:zo}=oe,{Symbol:Mr}=H,{kIsDestroyed:Xo,isDestroyed:Jo,isFinished:Qo,isServerRequest:Zo}=_e,kr=Mr("kDestroy"),zt=Mr("kConstruct");function Pr(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function el(e,t){const n=this._readableState,r=this._writableState,l=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof t=="function"&&t(),this):(Pr(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),l.constructed?Fn(this,e,t):this.once(kr,function(a){Fn(this,Yo(a,e),t)}),this)}function Fn(e,t,n){let r=!1;function l(a){if(r)return;r=!0;const s=e._readableState,w=e._writableState;Pr(a,w,s),w&&(w.closed=!0),s&&(s.closed=!0),typeof n=="function"&&n(a),a?de.nextTick(tl,e,a):de.nextTick(Wr,e)}try{e._destroy(t||null,l)}catch(a){l(a)}}function tl(e,t){Xt(e,t),Wr(e)}function Wr(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(n!=null&&n.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function Xt(e,t){const n=e._readableState,r=e._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function nl(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function Jt(e,t,n){const r=e._readableState,l=e._writableState;if(l!=null&&l.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||l!=null&&l.autoDestroy?e.destroy(t):t&&(t.stack,l&&!l.errored&&(l.errored=t),r&&!r.errored&&(r.errored=t),n?de.nextTick(Xt,e,t):Xt(e,t))}function rl(e,t){if(typeof e._construct!="function")return;const n=e._readableState,r=e._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),e.once(zt,t),!(e.listenerCount(zt)>1)&&de.nextTick(il,e)}function il(e){let t=!1;function n(r){if(t){Jt(e,r??new Ko);return}t=!0;const l=e._readableState,a=e._writableState,s=a||l;l&&(l.constructed=!0),a&&(a.constructed=!0),s.destroyed?e.emit(kr,r):r?Jt(e,r,!0):de.nextTick(ol,e)}try{e._construct(r=>{de.nextTick(n,r)})}catch(r){de.nextTick(n,r)}}function ol(e){e.emit(zt)}function Un(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function Cr(e){e.emit("close")}function ll(e,t){e.emit("error",t),de.nextTick(Cr,e)}function al(e,t){!e||Jo(e)||(!t&&!Qo(e)&&(t=new zo),Zo(e)?(e.socket=null,e.destroy(t)):Un(e)?e.abort():Un(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?de.nextTick(ll,e,t):de.nextTick(Cr,e),e.destroyed||(e[Xo]=!0))}var Ue={construct:rl,destroyer:al,destroy:el,undestroy:nl,errorOrDestroy:Jt};const{ArrayIsArray:fl,ObjectSetPrototypeOf:jr}=H,{EventEmitter:ht}=at;function bt(e){ht.call(this,e)}jr(bt.prototype,ht.prototype);jr(bt,ht);bt.prototype.pipe=function(e,t){const n=this;function r(b){e.writable&&e.write(b)===!1&&n.pause&&n.pause()}n.on("data",r);function l(){n.readable&&n.resume&&n.resume()}e.on("drain",l),!e._isStdio&&(!t||t.end!==!1)&&(n.on("end",s),n.on("close",w));let a=!1;function s(){a||(a=!0,e.end())}function w(){a||(a=!0,typeof e.destroy=="function"&&e.destroy())}function R(b){c(),ht.listenerCount(this,"error")===0&&this.emit("error",b)}Qt(n,"error",R),Qt(e,"error",R);function c(){n.removeListener("data",r),e.removeListener("drain",l),n.removeListener("end",s),n.removeListener("close",w),n.removeListener("error",R),e.removeListener("error",R),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e};function Qt(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);!e._events||!e._events[t]?e.on(t,n):fl(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]}var an={Stream:bt,prependListener:Qt},Fr={exports:{}};(function(e){const{SymbolDispose:t}=H,{AbortError:n,codes:r}=oe,{isNodeStream:l,isWebStream:a,kControllerErrorFunction:s}=_e,w=Ee,{ERR_INVALID_ARG_TYPE:R}=r;let c;const b=(T,h)=>{if(typeof T!="object"||!("aborted"in T))throw new R(h,"AbortSignal",T)};e.exports.addAbortSignal=function(h,d){if(b(h,"signal"),!l(d)&&!a(d))throw new R("stream",["ReadableStream","WritableStream","Stream"],d);return e.exports.addAbortSignalNoValidate(h,d)},e.exports.addAbortSignalNoValidate=function(T,h){if(typeof T!="object"||!("aborted"in T))return h;const d=l(h)?()=>{h.destroy(new n(void 0,{cause:T.reason}))}:()=>{h[s](new n(void 0,{cause:T.reason}))};if(T.aborted)d();else{c=c||ne.addAbortListener;const A=c(T,d);w(h,A[t])}return h}})(Fr);var pt=Fr.exports;const{StringPrototypeSlice:Bn,SymbolIterator:ul,TypedArrayPrototypeSet:Ze,Uint8Array:dl}=H,{Buffer:$t}=Oe,{inspect:sl}=ne;var cl=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(t){const n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=t+n.data;return r}concat(t){if(this.length===0)return $t.alloc(0);const n=$t.allocUnsafe(t>>>0);let r=this.head,l=0;for(;r;)Ze(n,r.data,l),l+=r.data.length,r=r.next;return n}consume(t,n){const r=this.head.data;if(t<r.length){const l=r.slice(0,t);return this.head.data=r.slice(t),l}return t===r.length?this.shift():n?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[ul](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let n="",r=this.head,l=0;do{const a=r.data;if(t>a.length)n+=a,t-=a.length;else{t===a.length?(n+=a,++l,r.next?this.head=r.next:this.head=this.tail=null):(n+=Bn(a,0,t),this.head=r,r.data=Bn(a,t));break}++l}while((r=r.next)!==null);return this.length-=l,n}_getBuffer(t){const n=$t.allocUnsafe(t),r=t;let l=this.head,a=0;do{const s=l.data;if(t>s.length)Ze(n,s,r-t),t-=s.length;else{t===s.length?(Ze(n,s,r-t),++a,l.next?this.head=l.next:this.head=this.tail=null):(Ze(n,new dl(s.buffer,s.byteOffset,t),r-t),this.head=l,l.data=s.slice(t));break}++a}while((l=l.next)!==null);return this.length-=a,n}[Symbol.for("nodejs.util.inspect.custom")](t,n){return sl(this,{...n,depth:0,customInspect:!1})}};const{MathFloor:hl,NumberIsInteger:bl}=H,{validateInteger:pl}=ze,{ERR_INVALID_ARG_VALUE:yl}=oe.codes;let Ur=16*1024,Br=16;function wl(e,t,n){return e.highWaterMark!=null?e.highWaterMark:t?e[n]:null}function Gr(e){return e?Br:Ur}function _l(e,t){pl(t,"value",0),e?Br=t:Ur=t}function gl(e,t,n,r){const l=wl(t,r,n);if(l!=null){if(!bl(l)||l<0){const a=r?`options.${n}`:"options.highWaterMark";throw new yl(a,l)}return hl(l)}return Gr(e.objectMode)}var yt={getHighWaterMark:gl,getDefaultHighWaterMark:Gr,setDefaultHighWaterMark:_l};const Gn=$e,{PromisePrototypeThen:Sl,SymbolAsyncIterator:Vn,SymbolIterator:Hn}=H,{Buffer:El}=Oe,{ERR_INVALID_ARG_TYPE:Rl,ERR_STREAM_NULL_VALUES:ml}=oe.codes;function Al(e,t,n){let r;if(typeof t=="string"||t instanceof El)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});let l;if(t&&t[Vn])l=!0,r=t[Vn]();else if(t&&t[Hn])l=!1,r=t[Hn]();else throw new Rl("iterable",["Iterable"],t);const a=new e({objectMode:!0,highWaterMark:1,...n});let s=!1;a._read=function(){s||(s=!0,R())},a._destroy=function(c,b){Sl(w(c),()=>Gn.nextTick(b,c),T=>Gn.nextTick(b,T||c))};async function w(c){const b=c!=null,T=typeof r.throw=="function";if(b&&T){const{value:h,done:d}=await r.throw(c);if(await h,d)return}if(typeof r.return=="function"){const{value:h}=await r.return();await h}}async function R(){for(;;){try{const{value:c,done:b}=l?await r.next():r.next();if(b)a.push(null);else{const T=c&&typeof c.then=="function"?await c:c;if(T===null)throw s=!1,new ml;if(a.push(T))continue;s=!1}}catch(c){a.destroy(c)}break}}return a}var Vr=Al,Nt,qn;function wt(){if(qn)return Nt;qn=1;const e=$e,{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:l,ObjectDefineProperties:a,ObjectKeys:s,ObjectSetPrototypeOf:w,Promise:R,SafeSet:c,SymbolAsyncDispose:b,SymbolAsyncIterator:T,Symbol:h}=H;Nt=N,N.ReadableState=be;const{EventEmitter:d}=at,{Stream:A,prependListener:p}=an,{Buffer:m}=Oe,{addAbortSignal:v}=pt,D=Ee;let _=ne.debuglog("stream",i=>{_=i});const F=cl,L=Ue,{getHighWaterMark:X,getDefaultHighWaterMark:le}=yt,{aggregateTwoErrors:B,codes:{ERR_INVALID_ARG_TYPE:q,ERR_METHOD_NOT_IMPLEMENTED:re,ERR_OUT_OF_RANGE:ie,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:g},AbortError:W}=oe,{validateObject:M}=ze,k=h("kPaused"),{StringDecoder:Y}=yi,K=Vr;w(N.prototype,A.prototype),w(N,A);const V=()=>{},{errorOrDestroy:z}=L,C=1,he=2,$=4,J=8,ue=16,Le=32,Me=64,ke=128,Be=256,gt=512,Ge=1024,Pe=2048,f=4096,u=8192,y=16384,x=32768,O=65536,U=1<<17,G=1<<18;function j(i){return{enumerable:!1,get(){return(this.state&i)!==0},set(o){o?this.state|=i:this.state&=~i}}}a(be.prototype,{objectMode:j(C),ended:j(he),endEmitted:j($),reading:j(J),constructed:j(ue),sync:j(Le),needReadable:j(Me),emittedReadable:j(ke),readableListening:j(Be),resumeScheduled:j(gt),errorEmitted:j(Ge),emitClose:j(Pe),autoDestroy:j(f),destroyed:j(u),closed:j(y),closeEmitted:j(x),multiAwaitDrain:j(O),readingMore:j(U),dataEmitted:j(G)});function be(i,o,S){typeof S!="boolean"&&(S=o instanceof ye()),this.state=Pe|f|ue|Le,i&&i.objectMode&&(this.state|=C),S&&i&&i.readableObjectMode&&(this.state|=C),this.highWaterMark=i?X(this,i,"readableHighWaterMark",S):le(!1),this.buffer=new F,this.length=0,this.pipes=[],this.flowing=null,this[k]=null,i&&i.emitClose===!1&&(this.state&=~Pe),i&&i.autoDestroy===!1&&(this.state&=~f),this.errored=null,this.defaultEncoding=i&&i.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,i&&i.encoding&&(this.decoder=new Y(i.encoding),this.encoding=i.encoding)}function N(i){if(!(this instanceof N))return new N(i);const o=this instanceof ye();this._readableState=new be(i,this,o),i&&(typeof i.read=="function"&&(this._read=i.read),typeof i.destroy=="function"&&(this._destroy=i.destroy),typeof i.construct=="function"&&(this._construct=i.construct),i.signal&&!o&&v(i.signal,this)),A.call(this,i),L.construct(this,()=>{this._readableState.needReadable&&Qe(this,this._readableState)})}N.prototype.destroy=L.destroy,N.prototype._undestroy=L.undestroy,N.prototype._destroy=function(i,o){o(i)},N.prototype[d.captureRejectionSymbol]=function(i){this.destroy(i)},N.prototype[b]=function(){let i;return this.destroyed||(i=this.readableEnded?null:new W,this.destroy(i)),new R((o,S)=>D(this,E=>E&&E!==i?S(E):o(null)))},N.prototype.push=function(i,o){return ge(this,i,o,!1)},N.prototype.unshift=function(i,o){return ge(this,i,o,!0)};function ge(i,o,S,E){_("readableAddChunk",o);const I=i._readableState;let Z;if(I.state&C||(typeof o=="string"?(S=S||I.defaultEncoding,I.encoding!==S&&(E&&I.encoding?o=m.from(o,S).toString(I.encoding):(o=m.from(o,S),S=""))):o instanceof m?S="":A._isUint8Array(o)?(o=A._uint8ArrayToBuffer(o),S=""):o!=null&&(Z=new q("chunk",["string","Buffer","Uint8Array"],o))),Z)z(i,Z);else if(o===null)I.state&=~J,ii(i,I);else if(I.state&C||o&&o.length>0)if(E)if(I.state&$)z(i,new g);else{if(I.destroyed||I.errored)return!1;St(i,I,o,!0)}else if(I.ended)z(i,new P);else{if(I.destroyed||I.errored)return!1;I.state&=~J,I.decoder&&!S?(o=I.decoder.write(o),I.objectMode||o.length!==0?St(i,I,o,!1):Qe(i,I)):St(i,I,o,!1)}else E||(I.state&=~J,Qe(i,I));return!I.ended&&(I.length<I.highWaterMark||I.length===0)}function St(i,o,S,E){o.flowing&&o.length===0&&!o.sync&&i.listenerCount("data")>0?(o.state&O?o.awaitDrainWriters.clear():o.awaitDrainWriters=null,o.dataEmitted=!0,i.emit("data",S)):(o.length+=o.objectMode?1:S.length,E?o.buffer.unshift(S):o.buffer.push(S),o.state&Me&&Je(i)),Qe(i,o)}N.prototype.isPaused=function(){const i=this._readableState;return i[k]===!0||i.flowing===!1},N.prototype.setEncoding=function(i){const o=new Y(i);this._readableState.decoder=o,this._readableState.encoding=this._readableState.decoder.encoding;const S=this._readableState.buffer;let E="";for(const I of S)E+=o.write(I);return S.clear(),E!==""&&S.push(E),this._readableState.length=E.length,this};const ni=1073741824;function ri(i){if(i>ni)throw new ie("size","<= 1GiB",i);return i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++,i}function hn(i,o){return i<=0||o.length===0&&o.ended?0:o.state&C?1:r(i)?o.flowing&&o.length?o.buffer.first().length:o.length:i<=o.length?i:o.ended?o.length:0}N.prototype.read=function(i){_("read",i),i===void 0?i=NaN:n(i)||(i=l(i,10));const o=this._readableState,S=i;if(i>o.highWaterMark&&(o.highWaterMark=ri(i)),i!==0&&(o.state&=~ke),i===0&&o.needReadable&&((o.highWaterMark!==0?o.length>=o.highWaterMark:o.length>0)||o.ended))return _("read: emitReadable",o.length,o.ended),o.length===0&&o.ended?Et(this):Je(this),null;if(i=hn(i,o),i===0&&o.ended)return o.length===0&&Et(this),null;let E=(o.state&Me)!==0;if(_("need readable",E),(o.length===0||o.length-i<o.highWaterMark)&&(E=!0,_("length less than watermark",E)),o.ended||o.reading||o.destroyed||o.errored||!o.constructed)E=!1,_("reading, ended or constructing",E);else if(E){_("do read"),o.state|=J|Le,o.length===0&&(o.state|=Me);try{this._read(o.highWaterMark)}catch(Z){z(this,Z)}o.state&=~Le,o.reading||(i=hn(S,o))}let I;return i>0?I=_n(i,o):I=null,I===null?(o.needReadable=o.length<=o.highWaterMark,i=0):(o.length-=i,o.multiAwaitDrain?o.awaitDrainWriters.clear():o.awaitDrainWriters=null),o.length===0&&(o.ended||(o.needReadable=!0),S!==i&&o.ended&&Et(this)),I!==null&&!o.errorEmitted&&!o.closeEmitted&&(o.dataEmitted=!0,this.emit("data",I)),I};function ii(i,o){if(_("onEofChunk"),!o.ended){if(o.decoder){const S=o.decoder.end();S&&S.length&&(o.buffer.push(S),o.length+=o.objectMode?1:S.length)}o.ended=!0,o.sync?Je(i):(o.needReadable=!1,o.emittedReadable=!0,bn(i))}}function Je(i){const o=i._readableState;_("emitReadable",o.needReadable,o.emittedReadable),o.needReadable=!1,o.emittedReadable||(_("emitReadable",o.flowing),o.emittedReadable=!0,e.nextTick(bn,i))}function bn(i){const o=i._readableState;_("emitReadable_",o.destroyed,o.length,o.ended),!o.destroyed&&!o.errored&&(o.length||o.ended)&&(i.emit("readable"),o.emittedReadable=!1),o.needReadable=!o.flowing&&!o.ended&&o.length<=o.highWaterMark,yn(i)}function Qe(i,o){!o.readingMore&&o.constructed&&(o.readingMore=!0,e.nextTick(oi,i,o))}function oi(i,o){for(;!o.reading&&!o.ended&&(o.length<o.highWaterMark||o.flowing&&o.length===0);){const S=o.length;if(_("maybeReadMore read 0"),i.read(0),S===o.length)break}o.readingMore=!1}N.prototype._read=function(i){throw new re("_read()")},N.prototype.pipe=function(i,o){const S=this,E=this._readableState;E.pipes.length===1&&(E.multiAwaitDrain||(E.multiAwaitDrain=!0,E.awaitDrainWriters=new c(E.awaitDrainWriters?[E.awaitDrainWriters]:[]))),E.pipes.push(i),_("pipe count=%d opts=%j",E.pipes.length,o);const Z=(!o||o.end!==!1)&&i!==e.stdout&&i!==e.stderr?Sn:Ve;E.endEmitted?e.nextTick(Z):S.once("end",Z),i.on("unpipe",ae);function ae(me,pe){_("onunpipe"),me===S&&pe&&pe.hasUnpiped===!1&&(pe.hasUnpiped=!0,hi())}function Sn(){_("onend"),i.end()}let Re,En=!1;function hi(){_("cleanup"),i.removeListener("close",At),i.removeListener("finish",Tt),Re&&i.removeListener("drain",Re),i.removeListener("error",mt),i.removeListener("unpipe",ae),S.removeListener("end",Sn),S.removeListener("end",Ve),S.removeListener("data",mn),En=!0,Re&&E.awaitDrainWriters&&(!i._writableState||i._writableState.needDrain)&&Re()}function Rn(){En||(E.pipes.length===1&&E.pipes[0]===i?(_("false write response, pause",0),E.awaitDrainWriters=i,E.multiAwaitDrain=!1):E.pipes.length>1&&E.pipes.includes(i)&&(_("false write response, pause",E.awaitDrainWriters.size),E.awaitDrainWriters.add(i)),S.pause()),Re||(Re=li(S,i),i.on("drain",Re))}S.on("data",mn);function mn(me){_("ondata");const pe=i.write(me);_("dest.write",pe),pe===!1&&Rn()}function mt(me){if(_("onerror",me),Ve(),i.removeListener("error",mt),i.listenerCount("error")===0){const pe=i._writableState||i._readableState;pe&&!pe.errorEmitted?z(i,me):i.emit("error",me)}}p(i,"error",mt);function At(){i.removeListener("finish",Tt),Ve()}i.once("close",At);function Tt(){_("onfinish"),i.removeListener("close",At),Ve()}i.once("finish",Tt);function Ve(){_("unpipe"),S.unpipe(i)}return i.emit("pipe",S),i.writableNeedDrain===!0?Rn():E.flowing||(_("pipe resume"),S.resume()),i};function li(i,o){return function(){const E=i._readableState;E.awaitDrainWriters===o?(_("pipeOnDrain",1),E.awaitDrainWriters=null):E.multiAwaitDrain&&(_("pipeOnDrain",E.awaitDrainWriters.size),E.awaitDrainWriters.delete(o)),(!E.awaitDrainWriters||E.awaitDrainWriters.size===0)&&i.listenerCount("data")&&i.resume()}}N.prototype.unpipe=function(i){const o=this._readableState,S={hasUnpiped:!1};if(o.pipes.length===0)return this;if(!i){const I=o.pipes;o.pipes=[],this.pause();for(let Z=0;Z<I.length;Z++)I[Z].emit("unpipe",this,{hasUnpiped:!1});return this}const E=t(o.pipes,i);return E===-1?this:(o.pipes.splice(E,1),o.pipes.length===0&&this.pause(),i.emit("unpipe",this,S),this)},N.prototype.on=function(i,o){const S=A.prototype.on.call(this,i,o),E=this._readableState;return i==="data"?(E.readableListening=this.listenerCount("readable")>0,E.flowing!==!1&&this.resume()):i==="readable"&&!E.endEmitted&&!E.readableListening&&(E.readableListening=E.needReadable=!0,E.flowing=!1,E.emittedReadable=!1,_("on readable",E.length,E.reading),E.length?Je(this):E.reading||e.nextTick(ai,this)),S},N.prototype.addListener=N.prototype.on,N.prototype.removeListener=function(i,o){const S=A.prototype.removeListener.call(this,i,o);return i==="readable"&&e.nextTick(pn,this),S},N.prototype.off=N.prototype.removeListener,N.prototype.removeAllListeners=function(i){const o=A.prototype.removeAllListeners.apply(this,arguments);return(i==="readable"||i===void 0)&&e.nextTick(pn,this),o};function pn(i){const o=i._readableState;o.readableListening=i.listenerCount("readable")>0,o.resumeScheduled&&o[k]===!1?o.flowing=!0:i.listenerCount("data")>0?i.resume():o.readableListening||(o.flowing=null)}function ai(i){_("readable nexttick read 0"),i.read(0)}N.prototype.resume=function(){const i=this._readableState;return i.flowing||(_("resume"),i.flowing=!i.readableListening,fi(this,i)),i[k]=!1,this};function fi(i,o){o.resumeScheduled||(o.resumeScheduled=!0,e.nextTick(ui,i,o))}function ui(i,o){_("resume",o.reading),o.reading||i.read(0),o.resumeScheduled=!1,i.emit("resume"),yn(i),o.flowing&&!o.reading&&i.read(0)}N.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[k]=!0,this};function yn(i){const o=i._readableState;for(_("flow",o.flowing);o.flowing&&i.read()!==null;);}N.prototype.wrap=function(i){let o=!1;i.on("data",E=>{!this.push(E)&&i.pause&&(o=!0,i.pause())}),i.on("end",()=>{this.push(null)}),i.on("error",E=>{z(this,E)}),i.on("close",()=>{this.destroy()}),i.on("destroy",()=>{this.destroy()}),this._read=()=>{o&&i.resume&&(o=!1,i.resume())};const S=s(i);for(let E=1;E<S.length;E++){const I=S[E];this[I]===void 0&&typeof i[I]=="function"&&(this[I]=i[I].bind(i))}return this},N.prototype[T]=function(){return wn(this)},N.prototype.iterator=function(i){return i!==void 0&&M(i,"options"),wn(this,i)};function wn(i,o){typeof i.read!="function"&&(i=N.wrap(i,{objectMode:!0}));const S=di(i,o);return S.stream=i,S}async function*di(i,o){let S=V;function E(ae){this===i?(S(),S=V):S=ae}i.on("readable",E);let I;const Z=D(i,{writable:!1},ae=>{I=ae?B(I,ae):null,S(),S=V});try{for(;;){const ae=i.destroyed?null:i.read();if(ae!==null)yield ae;else{if(I)throw I;if(I===null)return;await new R(E)}}}catch(ae){throw I=B(I,ae),I}finally{(I||(o==null?void 0:o.destroyOnReturn)!==!1)&&(I===void 0||i._readableState.autoDestroy)?L.destroyer(i,null):(i.off("readable",E),Z())}}a(N.prototype,{readable:{__proto__:null,get(){const i=this._readableState;return!!i&&i.readable!==!1&&!i.destroyed&&!i.errorEmitted&&!i.endEmitted},set(i){this._readableState&&(this._readableState.readable=!!i)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(i){this._readableState&&(this._readableState.flowing=i)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(i){this._readableState&&(this._readableState.destroyed=i)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(be.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[k]!==!1},set(i){this[k]=!!i}}}),N._fromList=_n;function _n(i,o){if(o.length===0)return null;let S;return o.objectMode?S=o.buffer.shift():!i||i>=o.length?(o.decoder?S=o.buffer.join(""):o.buffer.length===1?S=o.buffer.first():S=o.buffer.concat(o.length),o.buffer.clear()):S=o.buffer.consume(i,o.decoder),S}function Et(i){const o=i._readableState;_("endReadable",o.endEmitted),o.endEmitted||(o.ended=!0,e.nextTick(si,o,i))}function si(i,o){if(_("endReadableNT",i.endEmitted,i.length),!i.errored&&!i.closeEmitted&&!i.endEmitted&&i.length===0){if(i.endEmitted=!0,o.emit("end"),o.writable&&o.allowHalfOpen===!1)e.nextTick(ci,o);else if(i.autoDestroy){const S=o._writableState;(!S||S.autoDestroy&&(S.finished||S.writable===!1))&&o.destroy()}}}function ci(i){i.writable&&!i.writableEnded&&!i.destroyed&&i.end()}N.from=function(i,o){return K(N,i,o)};let Rt;function gn(){return Rt===void 0&&(Rt={}),Rt}return N.fromWeb=function(i,o){return gn().newStreamReadableFromReadableStream(i,o)},N.toWeb=function(i,o){return gn().newReadableStreamFromStreamReadable(i,o)},N.wrap=function(i,o){var S,E;return new N({objectMode:(S=(E=i.readableObjectMode)!==null&&E!==void 0?E:i.objectMode)!==null&&S!==void 0?S:!0,...o,destroy(I,Z){L.destroyer(i,I),Z(I)}}).wrap(i)},Nt}var Dt,Yn;function fn(){if(Yn)return Dt;Yn=1;const e=$e,{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:l,ObjectDefineProperties:a,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:w,Symbol:R,SymbolHasInstance:c}=H;Dt=M,M.WritableState=g;const{EventEmitter:b}=at,T=an.Stream,{Buffer:h}=Oe,d=Ue,{addAbortSignal:A}=pt,{getHighWaterMark:p,getDefaultHighWaterMark:m}=yt,{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:D,ERR_MULTIPLE_CALLBACK:_,ERR_STREAM_CANNOT_PIPE:F,ERR_STREAM_DESTROYED:L,ERR_STREAM_ALREADY_FINISHED:X,ERR_STREAM_NULL_VALUES:le,ERR_STREAM_WRITE_AFTER_END:B,ERR_UNKNOWN_ENCODING:q}=oe.codes,{errorOrDestroy:re}=d;s(M.prototype,T.prototype),s(M,T);function ie(){}const P=R("kOnFinished");function g(f,u,y){typeof y!="boolean"&&(y=u instanceof ye()),this.objectMode=!!(f&&f.objectMode),y&&(this.objectMode=this.objectMode||!!(f&&f.writableObjectMode)),this.highWaterMark=f?p(this,f,"writableHighWaterMark",y):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const x=!!(f&&f.decodeStrings===!1);this.decodeStrings=!x,this.defaultEncoding=f&&f.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=z.bind(void 0,u),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,W(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!f||f.emitClose!==!1,this.autoDestroy=!f||f.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function W(f){f.buffered=[],f.bufferedIndex=0,f.allBuffers=!0,f.allNoop=!0}g.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},l(g.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function M(f){const u=this instanceof ye();if(!u&&!r(M,this))return new M(f);this._writableState=new g(f,this,u),f&&(typeof f.write=="function"&&(this._write=f.write),typeof f.writev=="function"&&(this._writev=f.writev),typeof f.destroy=="function"&&(this._destroy=f.destroy),typeof f.final=="function"&&(this._final=f.final),typeof f.construct=="function"&&(this._construct=f.construct),f.signal&&A(f.signal,this)),T.call(this,f),d.construct(this,()=>{const y=this._writableState;y.writing||J(this,y),ke(this,y)})}l(M,c,{__proto__:null,value:function(f){return r(this,f)?!0:this!==M?!1:f&&f._writableState instanceof g}}),M.prototype.pipe=function(){re(this,new F)};function k(f,u,y,x){const O=f._writableState;if(typeof y=="function")x=y,y=O.defaultEncoding;else{if(!y)y=O.defaultEncoding;else if(y!=="buffer"&&!h.isEncoding(y))throw new q(y);typeof x!="function"&&(x=ie)}if(u===null)throw new le;if(!O.objectMode)if(typeof u=="string")O.decodeStrings!==!1&&(u=h.from(u,y),y="buffer");else if(u instanceof h)y="buffer";else if(T._isUint8Array(u))u=T._uint8ArrayToBuffer(u),y="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],u);let U;return O.ending?U=new B:O.destroyed&&(U=new L("write")),U?(e.nextTick(x,U),re(f,U,!0),U):(O.pendingcb++,Y(f,O,u,y,x))}M.prototype.write=function(f,u,y){return k(this,f,u,y)===!0},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){const f=this._writableState;f.corked&&(f.corked--,f.writing||J(this,f))},M.prototype.setDefaultEncoding=function(u){if(typeof u=="string"&&(u=w(u)),!h.isEncoding(u))throw new q(u);return this._writableState.defaultEncoding=u,this};function Y(f,u,y,x,O){const U=u.objectMode?1:y.length;u.length+=U;const G=u.length<u.highWaterMark;return G||(u.needDrain=!0),u.writing||u.corked||u.errored||!u.constructed?(u.buffered.push({chunk:y,encoding:x,callback:O}),u.allBuffers&&x!=="buffer"&&(u.allBuffers=!1),u.allNoop&&O!==ie&&(u.allNoop=!1)):(u.writelen=U,u.writecb=O,u.writing=!0,u.sync=!0,f._write(y,x,u.onwrite),u.sync=!1),G&&!u.errored&&!u.destroyed}function K(f,u,y,x,O,U,G){u.writelen=x,u.writecb=G,u.writing=!0,u.sync=!0,u.destroyed?u.onwrite(new L("write")):y?f._writev(O,u.onwrite):f._write(O,U,u.onwrite),u.sync=!1}function V(f,u,y,x){--u.pendingcb,x(y),$(u),re(f,y)}function z(f,u){const y=f._writableState,x=y.sync,O=y.writecb;if(typeof O!="function"){re(f,new _);return}y.writing=!1,y.writecb=null,y.length-=y.writelen,y.writelen=0,u?(u.stack,y.errored||(y.errored=u),f._readableState&&!f._readableState.errored&&(f._readableState.errored=u),x?e.nextTick(V,f,y,u,O):V(f,y,u,O)):(y.buffered.length>y.bufferedIndex&&J(f,y),x?y.afterWriteTickInfo!==null&&y.afterWriteTickInfo.cb===O?y.afterWriteTickInfo.count++:(y.afterWriteTickInfo={count:1,cb:O,stream:f,state:y},e.nextTick(C,y.afterWriteTickInfo)):he(f,y,1,O))}function C({stream:f,state:u,count:y,cb:x}){return u.afterWriteTickInfo=null,he(f,u,y,x)}function he(f,u,y,x){for(!u.ending&&!f.destroyed&&u.length===0&&u.needDrain&&(u.needDrain=!1,f.emit("drain"));y-- >0;)u.pendingcb--,x();u.destroyed&&$(u),ke(f,u)}function $(f){if(f.writing)return;for(let O=f.bufferedIndex;O<f.buffered.length;++O){var u;const{chunk:U,callback:G}=f.buffered[O],j=f.objectMode?1:U.length;f.length-=j,G((u=f.errored)!==null&&u!==void 0?u:new L("write"))}const y=f[P].splice(0);for(let O=0;O<y.length;O++){var x;y[O]((x=f.errored)!==null&&x!==void 0?x:new L("end"))}W(f)}function J(f,u){if(u.corked||u.bufferProcessing||u.destroyed||!u.constructed)return;const{buffered:y,bufferedIndex:x,objectMode:O}=u,U=y.length-x;if(!U)return;let G=x;if(u.bufferProcessing=!0,U>1&&f._writev){u.pendingcb-=U-1;const j=u.allNoop?ie:N=>{for(let ge=G;ge<y.length;++ge)y[ge].callback(N)},be=u.allNoop&&G===0?y:t(y,G);be.allBuffers=u.allBuffers,K(f,u,!0,u.length,be,"",j),W(u)}else{do{const{chunk:j,encoding:be,callback:N}=y[G];y[G++]=null;const ge=O?1:j.length;K(f,u,!1,ge,j,be,N)}while(G<y.length&&!u.writing);G===y.length?W(u):G>256?(y.splice(0,G),u.bufferedIndex=0):u.bufferedIndex=G}u.bufferProcessing=!1}M.prototype._write=function(f,u,y){if(this._writev)this._writev([{chunk:f,encoding:u}],y);else throw new D("_write()")},M.prototype._writev=null,M.prototype.end=function(f,u,y){const x=this._writableState;typeof f=="function"?(y=f,f=null,u=null):typeof u=="function"&&(y=u,u=null);let O;if(f!=null){const U=k(this,f,u);U instanceof n&&(O=U)}return x.corked&&(x.corked=1,this.uncork()),O||(!x.errored&&!x.ending?(x.ending=!0,ke(this,x,!0),x.ended=!0):x.finished?O=new X("end"):x.destroyed&&(O=new L("end"))),typeof y=="function"&&(O||x.finished?e.nextTick(y,O):x[P].push(y)),this};function ue(f){return f.ending&&!f.destroyed&&f.constructed&&f.length===0&&!f.errored&&f.buffered.length===0&&!f.finished&&!f.writing&&!f.errorEmitted&&!f.closeEmitted}function Le(f,u){let y=!1;function x(O){if(y){re(f,O??_());return}if(y=!0,u.pendingcb--,O){const U=u[P].splice(0);for(let G=0;G<U.length;G++)U[G](O);re(f,O,u.sync)}else ue(u)&&(u.prefinished=!0,f.emit("prefinish"),u.pendingcb++,e.nextTick(Be,f,u))}u.sync=!0,u.pendingcb++;try{f._final(x)}catch(O){x(O)}u.sync=!1}function Me(f,u){!u.prefinished&&!u.finalCalled&&(typeof f._final=="function"&&!u.destroyed?(u.finalCalled=!0,Le(f,u)):(u.prefinished=!0,f.emit("prefinish")))}function ke(f,u,y){ue(u)&&(Me(f,u),u.pendingcb===0&&(y?(u.pendingcb++,e.nextTick((x,O)=>{ue(O)?Be(x,O):O.pendingcb--},f,u)):ue(u)&&(u.pendingcb++,Be(f,u))))}function Be(f,u){u.pendingcb--,u.finished=!0;const y=u[P].splice(0);for(let x=0;x<y.length;x++)y[x]();if(f.emit("finish"),u.autoDestroy){const x=f._readableState;(!x||x.autoDestroy&&(x.endEmitted||x.readable===!1))&&f.destroy()}}a(M.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(f){this._writableState&&(this._writableState.destroyed=f)}},writable:{__proto__:null,get(){const f=this._writableState;return!!f&&f.writable!==!1&&!f.destroyed&&!f.errored&&!f.ending&&!f.ended},set(f){this._writableState&&(this._writableState.writable=!!f)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const f=this._writableState;return f?!f.destroyed&&!f.ending&&f.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const gt=d.destroy;M.prototype.destroy=function(f,u){const y=this._writableState;return!y.destroyed&&(y.bufferedIndex<y.buffered.length||y[P].length)&&e.nextTick($,y),gt.call(this,f,u),this},M.prototype._undestroy=d.undestroy,M.prototype._destroy=function(f,u){u(f)},M.prototype[b.captureRejectionSymbol]=function(f){this.destroy(f)};let Ge;function Pe(){return Ge===void 0&&(Ge={}),Ge}return M.fromWeb=function(f,u){return Pe().newStreamWritableFromWritableStream(f,u)},M.toWeb=function(f){return Pe().newWritableStreamFromStreamWritable(f)},Dt}var vt,Kn;function Tl(){if(Kn)return vt;Kn=1;const e=$e,t=Oe,{isReadable:n,isWritable:r,isIterable:l,isNodeStream:a,isReadableNodeStream:s,isWritableNodeStream:w,isDuplexNodeStream:R,isReadableStream:c,isWritableStream:b}=_e,T=Ee,{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:A}}=oe,{destroyer:p}=Ue,m=ye(),v=wt(),D=fn(),{createDeferredPromise:_}=ne,F=Vr,L=globalThis.Blob||t.Blob,X=typeof L<"u"?function(g){return g instanceof L}:function(g){return!1},le=globalThis.AbortController||Ke().AbortController,{FunctionPrototypeCall:B}=H;class q extends m{constructor(g){super(g),(g==null?void 0:g.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(g==null?void 0:g.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}vt=function P(g,W){if(R(g))return g;if(s(g))return ie({readable:g});if(w(g))return ie({writable:g});if(a(g))return ie({writable:!1,readable:!1});if(c(g))return ie({readable:v.fromWeb(g)});if(b(g))return ie({writable:D.fromWeb(g)});if(typeof g=="function"){const{value:k,write:Y,final:K,destroy:V}=re(g);if(l(k))return F(q,k,{objectMode:!0,write:Y,final:K,destroy:V});const z=k==null?void 0:k.then;if(typeof z=="function"){let C;const he=B(z,k,$=>{if($!=null)throw new A("nully","body",$)},$=>{p(C,$)});return C=new q({objectMode:!0,readable:!1,write:Y,final($){K(async()=>{try{await he,e.nextTick($,null)}catch(J){e.nextTick($,J)}})},destroy:V})}throw new A("Iterable, AsyncIterable or AsyncFunction",W,k)}if(X(g))return P(g.arrayBuffer());if(l(g))return F(q,g,{objectMode:!0,writable:!1});if(c(g==null?void 0:g.readable)&&b(g==null?void 0:g.writable))return q.fromWeb(g);if(typeof(g==null?void 0:g.writable)=="object"||typeof(g==null?void 0:g.readable)=="object"){const k=g!=null&&g.readable?s(g==null?void 0:g.readable)?g==null?void 0:g.readable:P(g.readable):void 0,Y=g!=null&&g.writable?w(g==null?void 0:g.writable)?g==null?void 0:g.writable:P(g.writable):void 0;return ie({readable:k,writable:Y})}const M=g==null?void 0:g.then;if(typeof M=="function"){let k;return B(M,g,Y=>{Y!=null&&k.push(Y),k.push(null)},Y=>{p(k,Y)}),k=new q({objectMode:!0,writable:!1,read(){}})}throw new d(W,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],g)};function re(P){let{promise:g,resolve:W}=_();const M=new le,k=M.signal;return{value:P(async function*(){for(;;){const K=g;g=null;const{chunk:V,done:z,cb:C}=await K;if(e.nextTick(C),z)return;if(k.aborted)throw new h(void 0,{cause:k.reason});({promise:g,resolve:W}=_()),yield V}}(),{signal:k}),write(K,V,z){const C=W;W=null,C({chunk:K,done:!1,cb:z})},final(K){const V=W;W=null,V({done:!0,cb:K})},destroy(K,V){M.abort(),V(K)}}}function ie(P){const g=P.readable&&typeof P.readable.read!="function"?v.wrap(P.readable):P.readable,W=P.writable;let M=!!n(g),k=!!r(W),Y,K,V,z,C;function he($){const J=z;z=null,J?J($):$&&C.destroy($)}return C=new q({readableObjectMode:!!(g!=null&&g.readableObjectMode),writableObjectMode:!!(W!=null&&W.writableObjectMode),readable:M,writable:k}),k&&(T(W,$=>{k=!1,$&&p(g,$),he($)}),C._write=function($,J,ue){W.write($,J)?ue():Y=ue},C._final=function($){W.end(),K=$},W.on("drain",function(){if(Y){const $=Y;Y=null,$()}}),W.on("finish",function(){if(K){const $=K;K=null,$()}})),M&&(T(g,$=>{M=!1,$&&p(g,$),he($)}),g.on("readable",function(){if(V){const $=V;V=null,$()}}),g.on("end",function(){C.push(null)}),C._read=function(){for(;;){const $=g.read();if($===null){V=C._read;return}if(!C.push($))return}}),C._destroy=function($,J){!$&&z!==null&&($=new h),V=null,Y=null,K=null,z===null?J($):(z=J,p(W,$),p(g,$))},C}return vt}var Lt,zn;function ye(){if(zn)return Lt;zn=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=H;Lt=s;const l=wt(),a=fn();r(s.prototype,l.prototype),r(s,l);{const b=n(a.prototype);for(let T=0;T<b.length;T++){const h=b[T];s.prototype[h]||(s.prototype[h]=a.prototype[h])}}function s(b){if(!(this instanceof s))return new s(b);l.call(this,b),a.call(this,b),b?(this.allowHalfOpen=b.allowHalfOpen!==!1,b.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),b.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(a.prototype,"writableLength")},writableFinished:{__proto__:null,...t(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(b){this._readableState&&this._writableState&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}}});let w;function R(){return w===void 0&&(w={}),w}s.fromWeb=function(b,T){return R().newStreamDuplexFromReadableWritablePair(b,T)},s.toWeb=function(b){return R().newReadableWritablePairFromDuplex(b)};let c;return s.from=function(b){return c||(c=Tl()),c(b,"body")},Lt}const{ObjectSetPrototypeOf:Hr,Symbol:Il}=H;var qr=we;const{ERR_METHOD_NOT_IMPLEMENTED:xl}=oe.codes,un=ye(),{getHighWaterMark:Ol}=yt;Hr(we.prototype,un.prototype);Hr(we,un);const Ye=Il("kCallback");function we(e){if(!(this instanceof we))return new we(e);const t=e?Ol(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),un.call(this,e),this._readableState.sync=!1,this[Ye]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",$l)}function Zt(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,n)=>{if(t){e?e(t):this.destroy(t);return}n!=null&&this.push(n),this.push(null),e&&e()}):(this.push(null),e&&e())}function $l(){this._final!==Zt&&Zt.call(this)}we.prototype._final=Zt;we.prototype._transform=function(e,t,n){throw new xl("_transform()")};we.prototype._write=function(e,t,n){const r=this._readableState,l=this._writableState,a=r.length;this._transform(e,t,(s,w)=>{if(s){n(s);return}w!=null&&this.push(w),l.ended||a===r.length||r.length<r.highWaterMark?n():this[Ye]=n})};we.prototype._read=function(){if(this[Ye]){const e=this[Ye];this[Ye]=null,e()}};const{ObjectSetPrototypeOf:Yr}=H;var Kr=je;const dn=qr;Yr(je.prototype,dn.prototype);Yr(je,dn);function je(e){if(!(this instanceof je))return new je(e);dn.call(this,e)}je.prototype._transform=function(e,t,n){n(null,e)};const He=$e,{ArrayIsArray:Nl,Promise:Dl,SymbolAsyncIterator:vl,SymbolDispose:Ll}=H,ot=Ee,{once:Ml}=ne,kl=Ue,Xn=ye(),{aggregateTwoErrors:Pl,codes:{ERR_INVALID_ARG_TYPE:en,ERR_INVALID_RETURN_VALUE:Mt,ERR_MISSING_ARGS:Wl,ERR_STREAM_DESTROYED:Cl,ERR_STREAM_PREMATURE_CLOSE:jl},AbortError:Fl}=oe,{validateFunction:Ul,validateAbortSignal:Bl}=ze,{isIterable:Te,isReadable:kt,isReadableNodeStream:rt,isNodeStream:Jn,isTransformStream:We,isWebStream:Gl,isReadableStream:Pt,isReadableFinished:Vl}=_e,Hl=globalThis.AbortController||Ke().AbortController;let Wt,Ct,jt;function Qn(e,t,n){let r=!1;e.on("close",()=>{r=!0});const l=ot(e,{readable:t,writable:n},a=>{r=!a});return{destroy:a=>{r||(r=!0,kl.destroyer(e,a||new Cl("pipe")))},cleanup:l}}function ql(e){return Ul(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function Ft(e){if(Te(e))return e;if(rt(e))return Yl(e);throw new en("val",["Readable","Iterable","AsyncIterable"],e)}async function*Yl(e){Ct||(Ct=wt()),yield*Ct.prototype[vl].call(e)}async function et(e,t,n,{end:r}){let l,a=null;const s=c=>{if(c&&(l=c),a){const b=a;a=null,b()}},w=()=>new Dl((c,b)=>{l?b(l):a=()=>{l?b(l):c()}});t.on("drain",s);const R=ot(t,{readable:!1},s);try{t.writableNeedDrain&&await w();for await(const c of e)t.write(c)||await w();r&&(t.end(),await w()),n()}catch(c){n(l!==c?Pl(l,c):c)}finally{R(),t.off("drain",s)}}async function Ut(e,t,n,{end:r}){We(t)&&(t=t.writable);const l=t.getWriter();try{for await(const a of e)await l.ready,l.write(a).catch(()=>{});await l.ready,r&&await l.close(),n()}catch(a){try{await l.abort(a),n(a)}catch(s){n(s)}}}function Kl(...e){return zr(e,Ml(ql(e)))}function zr(e,t,n){if(e.length===1&&Nl(e[0])&&(e=e[0]),e.length<2)throw new Wl("streams");const r=new Hl,l=r.signal,a=n==null?void 0:n.signal,s=[];Bl(a,"options.signal");function w(){A(new Fl)}jt=jt||ne.addAbortListener;let R;a&&(R=jt(a,w));let c,b;const T=[];let h=0;function d(D){A(D,--h===0)}function A(D,_){var F;if(D&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=D),!(!c&&!_)){for(;T.length;)T.shift()(c);(F=R)===null||F===void 0||F[Ll](),r.abort(),_&&(c||s.forEach(L=>L()),He.nextTick(t,c,b))}}let p;for(let D=0;D<e.length;D++){const _=e[D],F=D<e.length-1,L=D>0,X=F||(n==null?void 0:n.end)!==!1,le=D===e.length-1;if(Jn(_)){let B=function(q){q&&q.name!=="AbortError"&&q.code!=="ERR_STREAM_PREMATURE_CLOSE"&&d(q)};if(X){const{destroy:q,cleanup:re}=Qn(_,F,L);T.push(q),kt(_)&&le&&s.push(re)}_.on("error",B),kt(_)&&le&&s.push(()=>{_.removeListener("error",B)})}if(D===0)if(typeof _=="function"){if(p=_({signal:l}),!Te(p))throw new Mt("Iterable, AsyncIterable or Stream","source",p)}else Te(_)||rt(_)||We(_)?p=_:p=Xn.from(_);else if(typeof _=="function"){if(We(p)){var m;p=Ft((m=p)===null||m===void 0?void 0:m.readable)}else p=Ft(p);if(p=_(p,{signal:l}),F){if(!Te(p,!0))throw new Mt("AsyncIterable",`transform[${D-1}]`,p)}else{var v;Wt||(Wt=Kr);const B=new Wt({objectMode:!0}),q=(v=p)===null||v===void 0?void 0:v.then;if(typeof q=="function")h++,q.call(p,P=>{b=P,P!=null&&B.write(P),X&&B.end(),He.nextTick(d)},P=>{B.destroy(P),He.nextTick(d,P)});else if(Te(p,!0))h++,et(p,B,d,{end:X});else if(Pt(p)||We(p)){const P=p.readable||p;h++,et(P,B,d,{end:X})}else throw new Mt("AsyncIterable or Promise","destination",p);p=B;const{destroy:re,cleanup:ie}=Qn(p,!1,!0);T.push(re),le&&s.push(ie)}}else if(Jn(_)){if(rt(p)){h+=2;const B=zl(p,_,d,{end:X});kt(_)&&le&&s.push(B)}else if(We(p)||Pt(p)){const B=p.readable||p;h++,et(B,_,d,{end:X})}else if(Te(p))h++,et(p,_,d,{end:X});else throw new en("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=_}else if(Gl(_)){if(rt(p))h++,Ut(Ft(p),_,d,{end:X});else if(Pt(p)||Te(p))h++,Ut(p,_,d,{end:X});else if(We(p))h++,Ut(p.readable,_,d,{end:X});else throw new en("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=_}else p=Xn.from(_)}return(l!=null&&l.aborted||a!=null&&a.aborted)&&He.nextTick(w),p}function zl(e,t,n,{end:r}){let l=!1;if(t.on("close",()=>{l||n(new jl)}),e.pipe(t,{end:!1}),r){let a=function(){l=!0,t.end()};Vl(e)?He.nextTick(a):e.once("end",a)}else n();return ot(e,{readable:!0,writable:!1},a=>{const s=e._readableState;a&&a.code==="ERR_STREAM_PREMATURE_CLOSE"&&s&&s.ended&&!s.errored&&!s.errorEmitted?e.once("end",n).once("error",n):n(a)}),ot(t,{readable:!1,writable:!0},n)}var sn={pipelineImpl:zr,pipeline:Kl};const{pipeline:Xl}=sn,tt=ye(),{destroyer:Jl}=Ue,{isNodeStream:nt,isReadable:Zn,isWritable:er,isWebStream:Bt,isTransformStream:Ae,isWritableStream:tr,isReadableStream:nr}=_e,{AbortError:Ql,codes:{ERR_INVALID_ARG_VALUE:rr,ERR_MISSING_ARGS:Zl}}=oe,ea=Ee;var Xr=function(...t){if(t.length===0)throw new Zl("streams");if(t.length===1)return tt.from(t[0]);const n=[...t];if(typeof t[0]=="function"&&(t[0]=tt.from(t[0])),typeof t[t.length-1]=="function"){const d=t.length-1;t[d]=tt.from(t[d])}for(let d=0;d<t.length;++d)if(!(!nt(t[d])&&!Bt(t[d]))){if(d<t.length-1&&!(Zn(t[d])||nr(t[d])||Ae(t[d])))throw new rr(`streams[${d}]`,n[d],"must be readable");if(d>0&&!(er(t[d])||tr(t[d])||Ae(t[d])))throw new rr(`streams[${d}]`,n[d],"must be writable")}let r,l,a,s,w;function R(d){const A=s;s=null,A?A(d):d?w.destroy(d):!h&&!T&&w.destroy()}const c=t[0],b=Xl(t,R),T=!!(er(c)||tr(c)||Ae(c)),h=!!(Zn(b)||nr(b)||Ae(b));if(w=new tt({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(b!=null&&b.readableObjectMode),writable:T,readable:h}),T){if(nt(c))w._write=function(A,p,m){c.write(A,p)?m():r=m},w._final=function(A){c.end(),l=A},c.on("drain",function(){if(r){const A=r;r=null,A()}});else if(Bt(c)){const p=(Ae(c)?c.writable:c).getWriter();w._write=async function(m,v,D){try{await p.ready,p.write(m).catch(()=>{}),D()}catch(_){D(_)}},w._final=async function(m){try{await p.ready,p.close().catch(()=>{}),l=m}catch(v){m(v)}}}const d=Ae(b)?b.readable:b;ea(d,()=>{if(l){const A=l;l=null,A()}})}if(h){if(nt(b))b.on("readable",function(){if(a){const d=a;a=null,d()}}),b.on("end",function(){w.push(null)}),w._read=function(){for(;;){const d=b.read();if(d===null){a=w._read;return}if(!w.push(d))return}};else if(Bt(b)){const A=(Ae(b)?b.readable:b).getReader();w._read=async function(){for(;;)try{const{value:p,done:m}=await A.read();if(!w.push(p))return;if(m){w.push(null);return}}catch{return}}}}return w._destroy=function(d,A){!d&&s!==null&&(d=new Ql),a=null,r=null,l=null,s===null?A(d):(s=A,nt(b)&&Jl(b,d))},w};const ta=globalThis.AbortController||Ke().AbortController,{codes:{ERR_INVALID_ARG_VALUE:na,ERR_INVALID_ARG_TYPE:Xe,ERR_MISSING_ARGS:ra,ERR_OUT_OF_RANGE:ia},AbortError:se}=oe,{validateAbortSignal:De,validateInteger:ir,validateObject:ve}=ze,oa=H.Symbol("kWeak"),la=H.Symbol("kResistStopPropagation"),{finished:aa}=Ee,fa=Xr,{addAbortSignalNoValidate:ua}=pt,{isWritable:da,isNodeStream:sa}=_e,{deprecate:ca}=ne,{ArrayPrototypePush:ha,Boolean:ba,MathFloor:or,Number:pa,NumberIsNaN:ya,Promise:lr,PromiseReject:ar,PromiseResolve:wa,PromisePrototypeThen:fr,Symbol:Jr}=H,lt=Jr("kEmpty"),ur=Jr("kEof");function _a(e,t){if(t!=null&&ve(t,"options"),(t==null?void 0:t.signal)!=null&&De(t.signal,"options.signal"),sa(e)&&!da(e))throw new na("stream",e,"must be writable");const n=fa(this,e);return t!=null&&t.signal&&ua(t.signal,n),n}function _t(e,t){if(typeof e!="function")throw new Xe("fn",["Function","AsyncFunction"],e);t!=null&&ve(t,"options"),(t==null?void 0:t.signal)!=null&&De(t.signal,"options.signal");let n=1;(t==null?void 0:t.concurrency)!=null&&(n=or(t.concurrency));let r=n-1;return(t==null?void 0:t.highWaterMark)!=null&&(r=or(t.highWaterMark)),ir(n,"options.concurrency",1),ir(r,"options.highWaterMark",0),r+=n,(async function*(){const a=ne.AbortSignalAny([t==null?void 0:t.signal].filter(ba)),s=this,w=[],R={signal:a};let c,b,T=!1,h=0;function d(){T=!0,A()}function A(){h-=1,p()}function p(){b&&!T&&h<n&&w.length<r&&(b(),b=null)}async function m(){try{for await(let v of s){if(T)return;if(a.aborted)throw new se;try{if(v=e(v,R),v===lt)continue;v=wa(v)}catch(D){v=ar(D)}h+=1,fr(v,A,d),w.push(v),c&&(c(),c=null),!T&&(w.length>=r||h>=n)&&await new lr(D=>{b=D})}w.push(ur)}catch(v){const D=ar(v);fr(D,A,d),w.push(D)}finally{T=!0,c&&(c(),c=null)}}m();try{for(;;){for(;w.length>0;){const v=await w[0];if(v===ur)return;if(a.aborted)throw new se;v!==lt&&(yield v),w.shift(),p()}await new lr(v=>{c=v})}}finally{T=!0,b&&(b(),b=null)}}).call(this)}function ga(e=void 0){return e!=null&&ve(e,"options"),(e==null?void 0:e.signal)!=null&&De(e.signal,"options.signal"),(async function*(){let n=0;for await(const l of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new se({cause:e.signal.reason});yield[n++,l]}}).call(this)}async function Qr(e,t=void 0){for await(const n of cn.call(this,e,t))return!0;return!1}async function Sa(e,t=void 0){if(typeof e!="function")throw new Xe("fn",["Function","AsyncFunction"],e);return!await Qr.call(this,async(...n)=>!await e(...n),t)}async function Ea(e,t){for await(const n of cn.call(this,e,t))return n}async function Ra(e,t){if(typeof e!="function")throw new Xe("fn",["Function","AsyncFunction"],e);async function n(r,l){return await e(r,l),lt}for await(const r of _t.call(this,n,t));}function cn(e,t){if(typeof e!="function")throw new Xe("fn",["Function","AsyncFunction"],e);async function n(r,l){return await e(r,l)?r:lt}return _t.call(this,n,t)}class ma extends ra{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Aa(e,t,n){var r;if(typeof e!="function")throw new Xe("reducer",["Function","AsyncFunction"],e);n!=null&&ve(n,"options"),(n==null?void 0:n.signal)!=null&&De(n.signal,"options.signal");let l=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){const c=new se(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await aa(this.destroy(c)),c}const a=new ta,s=a.signal;if(n!=null&&n.signal){const c={once:!0,[oa]:this,[la]:!0};n.signal.addEventListener("abort",()=>a.abort(),c)}let w=!1;try{for await(const c of this){var R;if(w=!0,n!=null&&(R=n.signal)!==null&&R!==void 0&&R.aborted)throw new se;l?t=await e(t,c,{signal:s}):(t=c,l=!0)}if(!w&&!l)throw new ma}finally{a.abort()}return t}async function Ta(e){e!=null&&ve(e,"options"),(e==null?void 0:e.signal)!=null&&De(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new se(void 0,{cause:e.signal.reason});ha(t,r)}return t}function Ia(e,t){const n=_t.call(this,e,t);return(async function*(){for await(const l of n)yield*l}).call(this)}function Zr(e){if(e=pa(e),ya(e))return 0;if(e<0)throw new ia("number",">= 0",e);return e}function xa(e,t=void 0){return t!=null&&ve(t,"options"),(t==null?void 0:t.signal)!=null&&De(t.signal,"options.signal"),e=Zr(e),(async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new se;for await(const a of this){var l;if(t!=null&&(l=t.signal)!==null&&l!==void 0&&l.aborted)throw new se;e--<=0&&(yield a)}}).call(this)}function Oa(e,t=void 0){return t!=null&&ve(t,"options"),(t==null?void 0:t.signal)!=null&&De(t.signal,"options.signal"),e=Zr(e),(async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new se;for await(const a of this){var l;if(t!=null&&(l=t.signal)!==null&&l!==void 0&&l.aborted)throw new se;if(e-- >0&&(yield a),e<=0)return}}).call(this)}tn.streamReturningOperators={asIndexedPairs:ca(ga,"readable.asIndexedPairs will be removed in a future version."),drop:xa,filter:cn,flatMap:Ia,map:_t,take:Oa,compose:_a};tn.promiseReturningOperators={every:Sa,forEach:Ra,reduce:Aa,toArray:Ta,some:Qr,find:Ea};var Gt,dr;function ei(){if(dr)return Gt;dr=1;const{ArrayPrototypePop:e,Promise:t}=H,{isIterable:n,isNodeStream:r,isWebStream:l}=_e,{pipelineImpl:a}=sn,{finished:s}=Ee;ti();function w(...R){return new t((c,b)=>{let T,h;const d=R[R.length-1];if(d&&typeof d=="object"&&!r(d)&&!n(d)&&!l(d)){const A=e(R);T=A.signal,h=A.end}a(R,(A,p)=>{A?b(A):c(p)},{signal:T,end:h})})}return Gt={finished:s,pipeline:w},Gt}var sr;function ti(){if(sr)return It.exports;sr=1;const{Buffer:e}=Oe,{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=H,{promisify:{custom:l}}=ne,{streamReturningOperators:a,promiseReturningOperators:s}=tn,{codes:{ERR_ILLEGAL_CONSTRUCTOR:w}}=oe,R=Xr,{setDefaultHighWaterMark:c,getDefaultHighWaterMark:b}=yt,{pipeline:T}=sn,{destroyer:h}=Ue,d=Ee,A=ei(),p=_e,m=It.exports=an.Stream;m.isDestroyed=p.isDestroyed,m.isDisturbed=p.isDisturbed,m.isErrored=p.isErrored,m.isReadable=p.isReadable,m.isWritable=p.isWritable,m.Readable=wt();for(const D of n(a)){let F=function(...L){if(new.target)throw w();return m.Readable.from(r(_,this,L))};const _=a[D];t(F,"name",{__proto__:null,value:_.name}),t(F,"length",{__proto__:null,value:_.length}),t(m.Readable.prototype,D,{__proto__:null,value:F,enumerable:!1,configurable:!0,writable:!0})}for(const D of n(s)){let F=function(...L){if(new.target)throw w();return r(_,this,L)};const _=s[D];t(F,"name",{__proto__:null,value:_.name}),t(F,"length",{__proto__:null,value:_.length}),t(m.Readable.prototype,D,{__proto__:null,value:F,enumerable:!1,configurable:!0,writable:!0})}m.Writable=fn(),m.Duplex=ye(),m.Transform=qr,m.PassThrough=Kr,m.pipeline=T;const{addAbortSignal:v}=pt;return m.addAbortSignal=v,m.finished=d,m.destroy=h,m.compose=R,m.setDefaultHighWaterMark=c,m.getDefaultHighWaterMark=b,t(m,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return A}}),t(T,l,{__proto__:null,enumerable:!0,get(){return A.pipeline}}),t(d,l,{__proto__:null,enumerable:!0,get(){return A.finished}}),m.Stream=m,m._isUint8Array=function(_){return _ instanceof Uint8Array},m._uint8ArrayToBuffer=function(_){return e.from(_.buffer,_.byteOffset,_.byteLength)},It.exports}(function(e){const t=ti(),n=ei(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(Si);var $a=function(e,t,n,r){function l(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function w(b){try{c(r.next(b))}catch(T){s(T)}}function R(b){try{c(r.throw(b))}catch(T){s(T)}}function c(b){b.done?a(b.value):l(b.value).then(w,R)}c((r=r.apply(e,t||[])).next())})};class Fa{static digest(t){return $a(this,arguments,void 0,function*({data:n}){return wi(n)})}}export{Fa as S};
